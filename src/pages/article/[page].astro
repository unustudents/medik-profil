---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import ContactInfo from "@/components/ContactInfo.astro";
import Footer from "@/components/Footer.astro";
import ArticleCard from "@/components/ArticleCard.astro";
import { articles } from "@/data/articles";

import type { GetStaticPaths } from "astro";

export const getStaticPaths = (async ({ paginate }) => {
    // Sort articles by date or ID if needed, here we just use the array order
    // Pagination: 8 items per page
    return paginate(articles, { pageSize: 8 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<Layout
    title={`Informasi & Edukasi Kesehatan - Halaman ${page.currentPage} - RSU Afdila`}
>
    <Header />
    <main class="min-h-screen py-16 px-4 md:px-8">
        <div class="max-w-7xl mx-auto">
            <header class="mb-12">
                <h1
                    class="text-3xl md:text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white mb-4"
                >
                    Informasi & Edukasi Kesehatan
                </h1>
                <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl">
                    Dapatkan artikel kesehatan terpercaya dan berita terbaru
                    seputar layanan RSU Afdila.
                </p>
            </header>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                {page.data.map((article) => <ArticleCard article={article} />)}
            </div>

            <!-- Pagination Controls -->
            <div class="mt-12 flex justify-center items-center space-x-4">
                {
                    page.url.prev ? (
                        <a
                            href={page.url.prev}
                            class="px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg md:rounded-full font-medium hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm text-slate-700 dark:text-slate-300"
                        >
                            Previous
                        </a>
                    ) : (
                        <span class="px-4 py-2 border border-transparent text-slate-400 dark:text-slate-600 cursor-not-allowed">
                            Prev
                        </span>
                    )
                }
                <span class="text-slate-600 dark:text-slate-400 font-medium">
                    Page {page.currentPage} of {page.lastPage}
                </span>
                {
                    page.url.next ? (
                        <a
                            href={page.url.next}
                            class="px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg md:rounded-full font-medium hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm text-slate-700 dark:text-slate-300"
                        >
                            Next
                        </a>
                    ) : (
                        <span class="px-4 py-2 border border-transparent text-slate-400 dark:text-slate-600 cursor-not-allowed">
                            Next
                        </span>
                    )
                }
            </div>
        </div>
    </main>
    <ContactInfo />
    <Footer />
</Layout>
